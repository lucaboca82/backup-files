# backup-files
#### Author: Bocaletto Luca

Professional backup & sync tool with both a Windows GUI and a Linux CLI interface.  

**GitHub:** https://github.com/bocaletto-luca/backup-files  

---

## Contents

- `main_windows.py` – Windows-friendly GUI application (Tkinter)  
- `backup-files-linux.py` – Linux CLI tool (argparse)  
- `config.ini` (auto‐generated by Windows GUI)  
- `requirements.txt` – Python dependencies  

---

## Features

- Incremental file synchronization (timestamp & SHA-256 check)  
- Optional removal of files deleted from source  
- ZIP compression and Fernet encryption  
- Retention policy: keep only last _N_ archives  
- Email notification with optional attachment  
- Windows: scheduling via APScheduler in‐app  
- Linux: integrate with cron or systemd timers  
- Detailed rotating logs (console + file)  
- Exclude patterns (glob)  

---

## Requirements

- Python 3.7+  
- Pip packages (both platforms):  
  ```bash
  pip install cryptography apscheduler
  ```  

---

## Installation

```bash
git clone https://github.com/bocaletto-luca/backup-files.git
cd backup-files
```

### Windows GUI

1. Ensure Python 3.x is installed and on your PATH.  
2. Install dependencies:  
   ```bash
   pip install cryptography apscheduler
   ```
3. Run the GUI app:  
   ```bash
   python main_windows.py
   ```
4. On first run, a `config.ini` file is created under the working directory.

### Linux CLI

1. Make the script executable:  
   ```bash
   chmod +x backup-files-linux.py
   ```
2. Install dependencies:  
   ```bash
   pip3 install cryptography
   ```
3. Use the tool via CLI arguments (see Usage below).

---

## Usage

### Windows GUI (`main_windows.py`)

- Launch the app, select **Source** and **Destination** folders.  
- Toggle options:  
  - Delete obsolete files  
  - Compress backup  
  - Encrypt archive (enter password under **Advanced Settings**)  
- Configure scheduling, retention, excludes and email settings in **Settings → Advanced Settings**.  
- Click **Start Backup**. Logs and progress appear in the window; detailed logs in `backup.log`.

### Linux CLI (`backup-files-linux.py`)

```bash
./backup-files-linux.py \
  --src   /path/to/source \
  --dst   /path/to/dest \
  --delete-old \
  --compress \
  --encrypt --password "MySecret" \
  --retention 7 \
  --exclude "*.tmp" --exclude "cache/*" \
  --email smtp.example.com 587 user@host.com pwd recipient@host.com
```

#### Arguments

- `--src`, `--dst` (REQUIRED) source and destination directories  
- `--delete-old` flag to remove files no longer in source  
- `--compress` flag to create a ZIP archive  
- `--encrypt` flag to encrypt the ZIP (requires `--password`)  
- `--password` encryption password  
- `--retention N` keep only last _N_ archives (default 5)  
- `--exclude PATTERN` glob pattern to skip (can repeat)  
- `--email SMTP PORT USER PWD TO` send notification  

---

## Configuration (Windows GUI)

The GUI writes user settings to `config.ini`:

```ini
[paths]
src = C:\path\to\source
dst = D:\backups

[options]
delete_old = True
compression = True
encryption = True
encryption_pwd = MySecret
retention = 5

[schedule]
enabled = True
interval = 24

[advanced]
excludes = *.tmp;cache\*

[email]
server = smtp.example.com
port = 587
user = user@host.com
password = PwdHere
to = me@host.com
```

---

## Logging

- All actions logged to `backup.log` (rotated at 1 MB, 3 backups).  
- Console output mirrors the log for real-time monitoring.

---

## Scheduling

- **Windows GUI:** built-in scheduler runs every _N_ hours.  
- **Linux CLI:** integrate with cron or systemd:

```cron
0 */6 * * * /usr/bin/env python3 /path/to/backup-files-linux.py \
  --src /data --dst /backups --compress --retention 10 >> /var/log/backup.log 2>&1
```

---

## Contributing

1. Fork the repo  
2. Create a feature branch  
3. Submit a pull request  

---

## License

GPL © Luca Bocaletto (`bocaletto-luca`)
